<ion-view view-title="Agende Salão - Proprietário">
  <ion-content class="padding">
    <div ng-if="!user.$logged">
      <div class="list card">
        <div class="item item-divider">Bem Vindo!</div>
        <div class="item item-body">
          <div>
            Você precisa criar uma conta ou efetuar login para ter acesso aos nossos profissionais. Utilize a mídia social de sua preferência.
          </div>
        </div>
      </div>
      <div class="button-bar">
        <button class="button button-calm" ng-click="login('google')">
          Google+
        </button>
        <button class="button button-calm" ng-click="login('facebook')">
          Facebook
        </button>
      </div>   
    </div>

    <div ng-if="user.$logged">
      <div class="list card">
        <div class="item item-divider">Cadastro</div>
        <div class="item item-body">
          <div>
            Olá {{user.name}}, é necessário completar seu cadastro para poder receber agendamentos na sua conta.
          </div>
          <div>
            Preencha seus dados pessoais e escolha seus horários de trabalho que serão disponibilizados aos clientes.
          </div>
        </div>
      </div>
      <form name="userData" novalidate>
        <div class="list card">
          <div class="item item-divider">Dados profissionais</div>
          <label class="item item-input">
            <span class="input-label">Empresa</span>
            <input type="text" maxlength="30" ng-model="user.company" required>
          </label>
          <label class="item item-input">
            <span class="input-label">Serviços</span>
            <textarea ng-model="user.description" rows="4" required></textarea>
          </label>
          <label class="item item-input">
            <span class="input-label">CPF</span>
            <input type="text" maxlength="11" ng-model="user.cpf" required>
          </label>
          <label class="item item-input">
            <span class="input-label">Telefone</span>
            <input type="tel" maxlength="11" ng-model="user.tel" required>
          </label>
          <label class="item item-input">
            <span class="input-label">CEP</span>
            <input type="text" maxlength="8" ng-model="cep.value" required>
          </label>
          <div class="item item-input item-body" ng-if="cep.$present">
            <span class="input-label">Endereço</span>
            {{user.address}}
          </div>
          <label class="item item-input" ng-if="cep.$present">
            <span class="input-label">Número</span>
            <input type="text" maxlength="8" ng-model="user.number" required>
          </label>
          <label class="item item-input" ng-if="cep.$present">
            <span class="input-label">Complemento</span>
            <input type="text" maxlength="20" ng-model="user.complement">
          </label>          
        </div>

        <div class="list card" ng-if="days.length > 0">
          <div class="item item-divider">Adicionar Horários de trabalho</div>

          <label class="item item-input item-select">
            <span class="input-label">Dia</span>
            <select ng-model="day.selected" ng-options="item as item.label for item in days">
            </select>
          </label>
          
          <div class="item item-input item-time-content">
            <span class="input-label">Expediente</span>
            <ionic-timepicker input-obj="timeEndObj" class="item-time">
              <button class="button button-light">
                <standard-time-no-meridian etime='timeEndObj.inputEpochTime'></standard-time-no-meridian>
              </button>
            </ionic-timepicker>
            <span class="item-time separator">/</span>
            <ionic-timepicker input-obj="timeStartObj" class="item-time">
              <button class="button button-light">
                <standard-time-no-meridian etime='timeStartObj.inputEpochTime'></standard-time-no-meridian>
              </button>
            </ionic-timepicker>
          </div>

          <div class="item item-input item-time-content">
            <span class="input-label">Almoço</span>
            <ionic-timepicker input-obj="timeLunchEndObj" class="item-time">
              <button class="button button-light">
                <standard-time-no-meridian etime='timeLunchEndObj.inputEpochTime'></standard-time-no-meridian>
              </button>
            </ionic-timepicker>
            <span class="item-time separator">/</span>
            <ionic-timepicker input-obj="timeLunchStartObj" class="item-time">
              <button class="button button-light">
                <standard-time-no-meridian etime='timeLunchStartObj.inputEpochTime'></standard-time-no-meridian>
              </button>
            </ionic-timepicker>
          </div>

          <div class="item item-input item-time-content">
            <span class="input-label">Lanche</span>
            <ionic-timepicker input-obj="timeBreakEndObj" class="item-time">
              <button class="button button-light">
                <standard-time-no-meridian etime='timeBreakEndObj.inputEpochTime'></standard-time-no-meridian>
              </button>
            </ionic-timepicker>
            <span class="item-time separator">/</span>
            <ionic-timepicker input-obj="timeBreakStartObj" class="item-time">
              <button class="button button-light">
                <standard-time-no-meridian etime='timeBreakStartObj.inputEpochTime'></standard-time-no-meridian>
              </button>
            </ionic-timepicker>
          </div>

          <button class="button button-block" ng-click="addHour()">Adicionar</button>
        </div>

        <ul class="list card hours" ng-if="hours.length > 0">
          <li class="item item-divider">Horários adicionados</li>
          <li class="item" ng-repeat="hour in hours">
            {{hour.day.label}} - <standard-time-no-meridian etime="hour.start"></standard-time-no-meridian> às
            <standard-time-no-meridian etime="hour.startLunch"></standard-time-no-meridian> /
            <standard-time-no-meridian etime="hour.endLunch"></standard-time-no-meridian> às
            <standard-time-no-meridian etime="hour.startDinner"></standard-time-no-meridian> /
            <standard-time-no-meridian etime="hour.endDinner"></standard-time-no-meridian> às
            <standard-time-no-meridian etime="hour.end"></standard-time-no-meridian>
          </li>
        </ul>

        <div class="button-bar">
          <button class="button button-calm" ng-click="registry()">
            Salvar
          </button>
        </div>
      </form>   
    </div>
  </ion-content>
</ion-view>